
<notifier-container></notifier-container>

<div style="padding: 20px; background-color: #f9f9f9; border-radius: 8px;">
    
    <div class="card" style="background-color: white;">
        <div style=" padding: 15px;">
            <h2>Add  Hotel Room Form :-</h2>
        </div>
    </div>
</div>

<div style=" background-color: #f9f9f9;">

<form [formGroup]="roomForm" (ngSubmit)="onSubmit()" class="room-form">

  <!-- 1. Basic Info -->
   <!-- <div *ngIf="formErrors.length > 0" class="form-errors-box">
  <div class="error-text" *ngFor="let err of formErrors">{{ err }}</div>
</div> -->

  <fieldset>
    <legend>Basic Room Information</legend>
    <div class="form-group">
      <label>Room Name / Type</label>
      <select formControlName="roomType" >
        <option value="">Select Room Name</option>
        <option *ngFor="let type of roomTypes" [value]="type">{{ type }}</option>
      </select>
    </div>

    <div class="form-group ">
      <label>Number of Rooms Available</label>
      <input  required="true" type="number" formControlName="numRooms" placeholder="Number of Rooms Available"  />
    </div>

  </fieldset>

  <!-- 3. Occupancy Info -->
  <fieldset>
    <legend>Occupancy</legend>

    <div class="form-group">
      <label>Max Adults</label>
      <input  required="true" type="number" formControlName="maxAdults" placeholder="Max Adults" />
    </div>

    <div class="form-group">
      <label>Max Children</label>
      <input  required="true" type="number" formControlName="maxChildren" placeholder="Max Children" />
    </div>

    <div class="form-group">
      <label>Number of Beds</label>
      <input  required="true" type="number" formControlName="numberOfBeds" placeholder="Number of Beds" />
    </div>

    <div class="form-group">
      <label>Bed Type</label>
      <select formControlName="bedType">
        <option value="">-- Select Bed Type --</option>
        <option *ngFor="let bed of bedTypes" [value]="bed">{{ bed }}</option>
      </select>
    </div>
  </fieldset>

  <!-- 2. Pricing -->
  <fieldset>
    <legend>Pricing Details</legend>

    <div class="form-group">
      <label>Base Price (Per Night)</label>
      <input  required="true" type="number" formControlName="basePrice" placeholder="Base Price" />
    </div>

    <div class="form-group">
      <label>Discount (%)</label>
      <input  required="true" type="number" formControlName="discount" placeholder="Discount %" />
    </div>

    <div class="form-group">
      <label>Final Price</label>
      <input  required="true" type="number" formControlName="finalPrice" placeholder="Final Price" readonly />
    </div>

    <div class="form-group">
      <label>Extra Bed Charges</label>
      <input  required="true" type="number" formControlName="extraBedCharge" placeholder="Extra Bed Charges " />
    </div>

    <div class="form-group checkbox-group">
      <label><input  required="true" type="checkbox" formControlName="taxIncluded" /> Tax Included</label>
    </div>
  </fieldset>

  <!-- 4. Media -->
  <fieldset>
    <legend>Media</legend>
     <input
      type="file"
      #imageInput
      class="form-control"
      (change)="onImageChange($event)"
      multiple
    />

<div class="d-flex flex-wrap mt-3">
      <div
        *ngFor="let image of hotelImages; let i = index"
        class="position-relative me-2 mb-2"
        style="width: 120px; height: 100px;"
      >
        <img
           [src]="image.preview" 
          alt="Preview"
          class="img-thumbnail"
          style="width: 100%; height: 100%; object-fit: cover;"
        />
        <button
          type="button"
          class="btn btn-danger btn-sm position-absolute top-0 end-0"
          (click)="removeImage(i)"
          style="border-radius: 50%; padding: 2px 6px;" >
          Ã—
        </button>
      </div>
    </div>
  </fieldset>

  <!-- 5. Amenities -->
  <fieldset class="amenities">
    <legend>Room Features / Amenities</legend>
    <div class="checkbox-list">
    <label *ngFor="let amenity of amenitiesList">
  <input
    type="checkbox"
    [value]="amenity"
    [checked]="amenities.value.includes(amenity)"  
    (change)="onAmenityChange($event)"
/>
  {{ amenity }}
</label>

    </div>
  </fieldset>

  <!-- 6. Availability -->
  <fieldset>
    <legend>Availability</legend>

    <div class="form-group">
      <label>Booking Status</label>
      <select formControlName="bookingStatus">
        <option value="">-- Select Booking Status --</option>
        <option *ngFor="let status of bookingStatuses" [value]="status">{{ status }}</option>
      </select>
    </div>

    <div class="form-group checkbox-group">
      <label><input  required="true" type="checkbox" formControlName="visibility" /> Visible on Website</label>
    </div>
  </fieldset>

  <!-- 7. Optional -->
  <fieldset>
    <legend>Additional Details</legend>

    <div class="form-group">
      <label>Room Description</label>
      <textarea formControlName="description" placeholder="Room Description"></textarea>
    </div>

    <div class="form-group">
      <label>Cancellation Policy  <strong>(optional)</strong></label>
      <textarea formControlName="cancellationPolicy" placeholder="Cancellation Policy"></textarea>
    </div>
      <div class="form-group checkbox-group">
      <label><input  type="checkbox" formControlName="cancellation" (click)="chcek()"/> if have any Cancellation Charges  <strong>(optional)</strong></label>
      </div>
<div class="form-group" *ngIf="showcancellation">
      <label>Cancellation Charges in (24-hour) <strong>(optional)</strong> </label>
      <input type="number" formControlName="cancellation_charges" />
    </div>

    <div class="form-group">
      <label>Check-in Time</label>
      <input  required="true" type="time" formControlName="checkInTime" />
    </div>

    <div class="form-group">
      <label>Check-out Time</label>
      <input  required="true" type="time" formControlName="checkOutTime" />
    </div>

</fieldset>

  <!-- Submit Button -->
  <!-- <div class="submit-btn-container">
    <button type="submit" class="submit-btn" >Submit Room</button>
  </div> -->

  <div class="submit-btn-container">
  <button *ngIf="!editMode" type="submit" class="submit-btn">Submit Room</button>
  <button *ngIf="editMode" type="button" class="submit-btn" (click)="update()">Update Room</button>
</div>

</form>
</div>